/* =========================================================
   Bible Check-in System — Frontend CSS (Final, Full Replace)
   Mobile-first / Elder-friendly / 3-member team matrix NO horizontal drag
   ========================================================= */

/* =========================================================
   (A) Optional: hide theme header/footer on check-in pages
   - Best practice: add body class `bc-checkin-page` via PHP
   - Fallback: :has(#bc-app) for modern browsers
   ========================================================= */
body.bc-checkin-page header,
body.bc-checkin-page footer,
body.bc-checkin-page #masthead,
body.bc-checkin-page #colophon,
body.bc-checkin-page .site-header,
body.bc-checkin-page .site-footer,
body.bc-checkin-page .elementor-location-header,
body.bc-checkin-page .elementor-location-footer,
body.bc-checkin-page .wp-block-template-part.header,
body.bc-checkin-page .wp-block-template-part.footer{
  display:none !important;
}

/* Modern fallback */
body:has(#bc-app) header,
body:has(#bc-app) footer,
body:has(#bc-app) #masthead,
body:has(#bc-app) #colophon,
body:has(#bc-app) .site-header,
body:has(#bc-app) .site-footer,
body:has(#bc-app) .elementor-location-header,
body:has(#bc-app) .elementor-location-footer,
body:has(#bc-app) .wp-block-template-part.header,
body:has(#bc-app) .wp-block-template-part.footer{
  display:none !important;
}

/* =========================================================
   (B) Theme layout interference protection + base tokens
   ========================================================= */
#bc-app.bc-app{
  all: initial;
  display:block;
  font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans TC",sans-serif;
  color:#111827;
  line-height:1.65;
  font-size:16px; /* elder safe baseline */

  /* soft, not flashy */
  --bc-primary: #2563eb;
  --bc-primary-soft: #eff6ff;
  --bc-success: #16a34a;
  --bc-warn: #dc2626;
  --bc-text-muted: #4b5563;
  --bc-border: #e5e7eb;
  --bc-card: #f3f4f6;
}

#bc-app.bc-app *{
  box-sizing:border-box;
  font-family: inherit;
}

#bc-app.bc-app a{ color:inherit; }

/* =========================================================
   (C) App container
   ========================================================= */
.bc-app{
  max-width:100%;
  padding:14px 14px 18px 14px;
}

.bc-app *{ box-sizing:border-box; }

.bc-empty{
  padding:16px 14px;
  color:#374151;
  background:#f6f7f9;
  border-radius:14px;
  border:1px solid #e6e8ec;
  font-size:16px;
}

/* =========================================================
   (D) Header / context block
   ========================================================= */
.bc-header{ margin-bottom:16px; }

.bc-title{
  font-size:30px;
  font-weight:900;
  margin:0 0 6px 0;
  letter-spacing:.2px;
}

.bc-subtitle{
  font-size:16px;
  color:var(--bc-text-muted);
  margin-bottom:12px;
  font-weight:800;
}

.bc-toolbar{
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
  margin:10px 0 12px 0;
}

.bc-hint{
  font-size:15px;
  color:var(--bc-text-muted);
  font-weight:800;
}

/* Buttons */
.bc-btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:12px 16px;
  border-radius:14px;
  text-decoration:none;
  font-weight:900;
  font-size:16px;
  border:1px solid transparent;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
}

.bc-btn-ghost{
  border-color:#cbd5e1;
  background:var(--bc-primary-soft);
  color:#111827;
}

.bc-btn-ghost:active{ transform:scale(0.99); }

/* Breadcrumb */
.bc-breadcrumb{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  align-items:center;
  font-size:15px;
  color:var(--bc-text-muted);
  margin:10px 0 12px 0;
}

.bc-crumb{
  padding:6px 10px;
  border-radius:999px;
  border:1px solid var(--bc-border);
  background:#fff;
  font-weight:800;
}

.bc-crumb.is-now{
  border-color:var(--bc-primary);
  background:var(--bc-primary-soft);
  color:#1e3a8a;
  font-weight:900;
}

.bc-crumb.is-done{
  border-color:#bfdbfe;
  background:#eff6ff;
  color:#1d4ed8;
  font-weight:900;
}

.bc-sep{ color:#c0c7d1; }

/* Chosen summary (老人不迷路) */
.bc-chosen{
  background:#fff;
  border:1px solid #e6e8ec;
  border-radius:16px;
  padding:12px 14px;
}

.bc-chosen-line{
  display:flex;
  gap:10px;
  align-items:baseline;
  padding:6px 0;
  border-bottom:1px dashed #eef0f3;
}

.bc-chosen-line:last-child{ border-bottom:none; }

.bc-chosen-k{
  width:62px;
  flex:0 0 auto;
  color:#6b7280;
  font-size:14px;
  font-weight:800;
}

.bc-chosen-v{
  font-size:16px;
  font-weight:900;
  color:#111827;
}

/* =========================================================
   (E) Step container
   ========================================================= */
.bc-step{
  margin-top:16px;
  margin-bottom:20px;
}

.bc-step-top{ margin-bottom:12px; }

.bc-step-title{
  font-size:22px;
  font-weight:900;
  margin:0 0 10px 0;
  letter-spacing:.2px;
}

.bc-note{
  font-size:16px;
  color:#111827;
  margin:10px 0 14px 0;
  font-weight:900;
  background:var(--bc-primary-soft);
  border:1px solid rgba(37,99,235,.35);
  padding:10px 12px;
  border-radius:14px;
}

/* =========================================================
   (F) Lists (big tap targets) + gentle color cue on actionable items
   ========================================================= */
.bc-list{
  display:flex;
  flex-direction:column;
  gap:12px;
}

.bc-list-item{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:18px 16px;
  border-radius:18px;
  background:var(--bc-card);
  border:1px solid var(--bc-border);
  border-left:6px solid rgba(37,99,235,.22); /* subtle actionable cue */
  color:#111827;
  text-decoration:none;
  transition:transform .08s ease, background .15s ease, border-left-color .15s ease;
  min-height:72px;
  -webkit-tap-highlight-color: transparent;
}

.bc-list-item:active{
  transform:scale(0.99);
  border-left-color: rgba(37,99,235,.65);
}
.bc-list-item:hover{ background:#eceff3; }

.bc-item-main{
  min-width:0;
  flex:1 1 auto;
}

.bc-item-title{
  font-size:20px;
  font-weight:900;
  letter-spacing:.2px;
}

.bc-item-sub{
  font-size:16px;
  color:#374151;
  margin-top:6px;
  word-break:break-word;
  font-weight:750;
}

.bc-item-right{
  flex:0 0 auto;
  font-size:15px;
  font-weight:900;
  color:#111827;
  opacity:.95;
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:8px;
}

.bc-go{
  padding:7px 12px;
  border-radius:999px;
  background:var(--bc-primary);
  color:#fff;
  font-size:14px;
  font-weight:900;
  letter-spacing:.2px;
}

.bc-branch-item.is-muted{
  background:#f8fafc;
  border-left-color: rgba(148,163,184,.35);
}

.bc-team-item.is-warning{
  background:#fff4f4;
  border-color:#fecaca;
  border-left-color: rgba(220,38,38,.35);
}

.bc-team-meta{ margin-top:8px; }

.bc-badge{
  display:inline-flex;
  align-items:center;
  padding:5px 10px;
  border-radius:999px;
  font-size:13px;
  font-weight:900;
  border:1px solid transparent;
}

.bc-badge-warn{
  background:#fee2e2;
  border-color:#fecaca;
  color:#991b1b;
}

.bc-month-item.is-locked .bc-go{
  background:#6b7280;
}

/* =========================================================
   (G) Matrix (check-in)
   - Rule: team is ALWAYS 3 members
   - Goal: NO horizontal drag on modern phones
   ========================================================= */
.bc-matrix{
  display:block;
  overflow-x:auto; /* should not be needed on phones now, but safe fallback */
  -webkit-overflow-scrolling: touch;
  border:1px solid #d1d5db;
  border-radius:18px;
  background:#fff;
}

/* default grid (tablet/desktop can breathe) */
.bc-matrix-header,
.bc-matrix-row{
  display:grid;
  grid-auto-flow:column;
  grid-auto-columns:minmax(96px, 1fr);
}

.bc-matrix-header{
  position:sticky;
  top:0;
  z-index:2;
  background:#f3f4f6;
  border-bottom:1px solid #d1d5db;
}

.bc-matrix-row:not(:last-child){
  border-bottom:1px solid #eef0f3;
}

.bc-cell{
  padding:12px 10px;
  text-align:center;
  font-size:16px;
  font-weight:850;
  color:#111827;
}

.bc-cell-date{
  font-weight:900;
  background:#fafafa;
  font-size:17px;
}

.bc-cell-member{
  font-weight:900;
  font-size:15px;
  color:#111827;
  white-space:nowrap;
}

/* Checkbox (clear, friendly) */
.bc-cell-checkin{ padding:10px 8px; }

.bc-checkin-wrap{
  position:relative;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:46px;
  height:46px;
  border-radius:14px;
  background:#f9fafb;
  border:1px solid #e5e7eb;
  -webkit-tap-highlight-color: transparent;
}

/* native checkbox hidden but accessible */
.bc-checkin{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  opacity:0;
  margin:0;
  cursor:pointer;
}

.bc-checkin-box{
  width:22px;
  height:22px;
  border-radius:6px;
  border:2px solid #6b7280;
  background:#fff;
  display:inline-block;
}

/* checked state: green for “done” */
.bc-checkin:checked + .bc-checkin-box{
  border-color:var(--bc-success);
  background:var(--bc-success);
  box-shadow: 0 0 0 3px rgba(22,163,74,.15);
}

/* check mark */
.bc-checkin:checked + .bc-checkin-box::after{
  content:"";
  position:absolute;
  width:8px;
  height:14px;
  border-right:3px solid #fff;
  border-bottom:3px solid #fff;
  transform: rotate(45deg);
  left:50%;
  top:50%;
  margin-left:-3px;
  margin-top:-9px;
}

.bc-checkin:disabled{ cursor:not-allowed; }
.bc-checkin:disabled + .bc-checkin-box{
  opacity:.45;
  box-shadow:none;
}

/* =========================================================
   (H) Phone optimization — force exact 4 columns (date + 3 people)
   This removes the need to drag horizontally on near-10-year phones.
   ========================================================= */
@media (max-width: 480px){

  /* Force exact layout: 1 date column + 3 member columns */
  .bc-matrix-header,
  .bc-matrix-row{
    grid-template-columns: 74px repeat(3, minmax(0, 1fr));
    grid-auto-flow: unset;
    grid-auto-columns: unset;
  }

  /* make header names wrap to 2 lines if needed */
  .bc-cell-member{
    white-space: normal;
    overflow-wrap: anywhere;
    line-height: 1.15;
    font-size: 13px;  /* only shrink header names a bit */
    padding: 10px 6px;
  }

  .bc-cell{
    padding: 10px 6px;
    font-size: 15px;
  }

  .bc-cell-date{
    font-size: 16px;
    padding: 10px 6px;
  }

  /* keep tap target comfortable */
  .bc-checkin-wrap{
    width:44px;
    height:44px;
    border-radius:14px;
  }
}

/* =========================================================
   (I) Responsive polish
   ========================================================= */
@media (min-width: 768px){
  #bc-app.bc-app{ font-size:16px; }
  .bc-app{ padding:18px; }
  .bc-title{ font-size:32px; }
  .bc-step-title{ font-size:23px; }
  .bc-item-title{ font-size:21px; }
  .bc-matrix{ max-width:100%; }
}

@media (min-width: 1024px){
  .bc-app{
    max-width: 980px;
    margin: 0 auto;
  }
}

/* =========================================================
   (J) Small safety: prevent accidental overflow
   ========================================================= */
.bc-item-title,
.bc-item-sub,
.bc-subtitle{
  overflow-wrap:anywhere;
  word-break:break-word;
}
